## åˆ›å»ºæ–°åˆ†æ”¯

é¦–å…ˆä½¿ç”¨ `checkout` æˆ– `switch` å‘½ä»¤åˆ‡æ¢åˆ°æŒ‡å®šåˆ†æ”¯ã€‚ä¹‹åä½¿ç”¨ `git branch`å‘½ä»¤å³å¯ï¼š

```bash
git branch [-b] branch_name
```

`-b` å‚æ•°æŒ‡åŸºäºå½“å‰åˆ†æ”¯åˆ›å»ºå¹¶ç›´æ¥åˆ‡æ¢åˆ° `branch_name` åˆ†æ”¯ï¼Œå¦‚æœä¸åŠ è¯¥å‚æ•°ä»…ä»…è¡¨ç¤ºåŸºäºå½“å‰åˆ†æ”¯åˆ›å»º `branch_name` åˆ†æ”¯ã€‚

ä¹Ÿå°±æ˜¯è¯´ä½¿ç”¨ `-b` å‚æ•°ç›¸å½“äºä¸‹é¢ä¸¤æ¡å‘½ä»¤åˆå¹¶æ‰§è¡Œï¼š

```bash
git branch branch_name
git switch branch_name
```

## åŸºäº commit åˆ›å»ºæ–°åˆ†æ”¯

æ‰¾å‡ºæŒ‡å®šçš„ commitï¼Œç„¶åä½¿ç”¨å¦‚ä¸‹å‘½ä»¤å³å¯åˆ›å»ºåˆ†æ”¯ï¼š

```git
git branch <åˆ†æ”¯å> <commit>
```

ç¤ºä¾‹ï¼š

```git
$ git log
commit 907894ee34190bb4f1fca813bf2a975979054cd8
Author: xxxx <xxxx@mail.com>
Date:   Tue Sep 14 10:15:18 2021 +0800

    fix: ä¿®å¤æ—¥å¿—

commit 595d44718e56760fae7dc65623fb6c5ab8cfdd10
Author: xxxx <xxxx@mail.com>
Date:   Mon Sep 13 18:36:45 2021 +0800

    feat: xxxx
```

æ¯”å¦‚åŸºäº 595d44718e56760fae7dc65623fb6c5ab8cfdd10 åˆ›å»º fix-bug åˆ†æ”¯ï¼š

```git
git branch fix-bug 595d44718e56760fae7dc65623fb6c5ab8cfdd10
```

ä¹‹åæ—¢å¯ä»¥å°†æ–°åˆ›å»ºçš„åˆ†æ”¯æ¨é€è¿œç¨‹äº†ï¼š

```git
git push â€“-set-upstream origin fix-bug
```

## åˆ†æ”¯åˆ é™¤

### åˆ é™¤æœ¬åœ°åˆ†æ”¯

```bash
git branch -d branch_name
```

:::danger[å¼ºåˆ¶åˆ é™¤]

<u>å¦‚æœä½ ç¡®å®šå·²ç»ä¸éœ€è¦è¿™ä¸ªåˆ†æ”¯ä¸Šçš„æ‰€æœ‰å†…å®¹ï¼Œæƒ³è¦å¼ºåˆ¶åˆ é™¤</u>ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨å¤§å†™çš„ `-D` é€‰é¡¹ï¼š

```bash
git branch -D branch_name
```

:::

<details open>
<summary>**åˆ é™¤æœ¬åœ°å…¶ä»–æ‰€æœ‰åˆ†æ”¯**</summary>

æœ‰æ—¶å€™æœ¬åœ°åˆ†æ”¯å¤ªå¤šï¼Œä¸€ä¸ªä¸€ä¸ªçš„åˆ é™¤åˆå¤ªéº»çƒ¦ï¼Œä½†æ˜¯ git åˆæ²¡æœ‰æä¾›è¿™ç§å‘½ä»¤ï¼Œè¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿ

ç­”æ¡ˆå¾ˆç®€å•ï¼Œç›´æ¥åœ¨ shell ä¸­ä½¿ç”¨ç®¡é“å°†å¤šä¸ªå‘½ä»¤ç»„åˆèµ·æ¥ä½¿ç”¨ï¼Œå¦‚ä¸‹ï¼š

```bash
git branch | grep -v "$(git rev-parse --abbrev-ref HEAD)" | xargs git branch -D
```

å‘½ä»¤è§£é‡Šï¼š

- `git branch`ï¼šåˆ—å‡ºæ‰€æœ‰æœ¬åœ°åˆ†æ”¯
- `grep -v "$(git rev-parse --abbrev-ref HEAD)"`ï¼šè¿‡æ»¤æ‰å½“å‰æ‰€åœ¨çš„åˆ†æ”¯ã€‚`git rev-parse --abbrev-ref HEAD` ä¼šè¾“å‡ºå½“å‰åˆ†æ”¯çš„åç§°ï¼Œè€Œ `grep -v` åˆ™è¡¨ç¤ºâ€œä¸åŒ…å«â€è¿™ä¸ªåç§°çš„è¡Œã€‚
- `xargs git branch -D`ï¼š `xargs` ä¼šæŠŠå‰é¢è¿‡æ»¤å‡ºæ¥çš„åˆ†æ”¯åç§°ä½œä¸ºå‚æ•°ï¼Œä¼ é€’ç»™ `git branch -D` å‘½ä»¤ã€‚è¿™é‡Œçš„ `-D` (å¤§å†™çš„D) æ„å‘³ç€å¼ºåˆ¶åˆ é™¤ï¼Œå³ä½¿è¿™äº›åˆ†æ”¯ä¸Šæœ‰æœªåˆå¹¶çš„æäº¤ï¼Œä¹Ÿä¼šè¢«åˆ é™¤ã€‚

:::danger[NOTE]
`-D` å¼ºåˆ¶åˆ é™¤ä¼šä¸¢å¤±æœ¬åœ°æœªåˆå¹¶çš„æ›´æ”¹ï¼Œæ‰€ä»¥åœ¨ä½¿ç”¨å‰è¯·åŠ¡å¿…ç¡®è®¤ä½ ä¸éœ€è¦è¿™äº›åˆ†æ”¯ä¸Šçš„ä»»ä½•å†…å®¹ã€‚å¦‚æœä½ å¸Œæœ›æ›´å®‰å…¨åœ°åˆ é™¤ï¼Œåªåˆ é™¤å·²ç»åˆå¹¶çš„åˆ†æ”¯ï¼Œå¯ä»¥å°† `-D` æ›¿æ¢ä¸º `-d`ã€‚
:::

:::success[åˆ›å»ºåˆ«å]

å¦‚æœç»å¸¸éœ€è¦æ‰§è¡Œè¿™ç±»æ¸…ç†æ“ä½œï¼Œå¯ä»¥è€ƒè™‘ä¸ºè¯¥ç®¡é“å‘½ä»¤è®¾ç½®ä¸€ä¸ª git åˆ«åã€‚è¿™æ ·ï¼Œä»¥ååªéœ€è¦ç®€å•çš„è¾“å…¥ä¸€ä¸‹å‘½ä»¤å°±å¯ä»¥å®Œæˆåˆ é™¤æ“ä½œã€‚

åœ¨ Git é…ç½®æ–‡ä»¶ï¼ˆé€šå¸¸æ˜¯ `~/.gitconfig` æˆ–ä»“åº“çš„ `.git/config`ï¼‰ä¸­æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š

```bash
[alias]
	clean-branches = "!git branch | grep -v \"$(git rev-parse --abbrev-ref HEAD)\" | xargs git branch -D"
```

ä¿å­˜é…ç½®åï¼Œå°±å¯ä»¥ç›´æ¥åœ¨å‘½ä»¤è¡Œä¸­è¿è¡Œ `git clean-branches` å‘½ä»¤ï¼Œå°±èƒ½å®ç°åˆ é™¤å½“å‰åˆ†æ”¯å¤–çš„æ‰€æœ‰æœ¬åœ°åˆ†æ”¯ã€‚
:::
</details>

### åˆ é™¤è¿œç¨‹åˆ†æ”¯

```bash
# åˆ é™¤è¿œç¨‹åˆ†æ”¯
$ git push --delete origin branch_name

# ä¹‹åå¦‚æœæƒ³å°†æœ¬åœ°åˆ†æ”¯ä¹Ÿåˆ é™¤å°±å†æ‰§è¡Œä¸‹ä¸‹é¢çš„å‘½ä»¤å³å¯:
$ git branch -d branch_name
```









## ä¿®æ”¹åˆ†æ”¯å

åˆ†æ”¯åä¿®æ”¹åˆ†ä¸ºä¸¤ç§æƒ…å†µï¼Œè¦ä¿®æ”¹çš„åˆ†æ”¯å·²æ¨é€åˆ°è¿œç¨‹å’Œæœªæ¨é€åˆ°è¿œç¨‹ï¼š

### åˆ†æ”¯æœªæ¨é€è¿œç¨‹

å¦‚æœåˆ›å»ºçš„åˆ†æ”¯è¿˜æ²¡æœ‰ push åˆ°è¿œç¨‹ä¿®æ”¹èµ·æ¥æ¯”è¾ƒç®€å•ï¼Œç›´æ¥ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤è¿›è¡Œä¿®æ”¹å³å¯ï¼š

```git
git branch -m OldBranchName NewBranchName
```

ä¿®æ”¹å®Œæˆåç›´æ¥å°†è¯¥åˆ†æ”¯æ¨é€åˆ°è¿œç¨‹å°±ä¸‡äº‹å¤§å‰äº†ã€‚

```git
git push origin NewBranchName
```

ä½†æ˜¯å¦‚æœæˆ‘ä»¬è¦ä¿®æ”¹çš„åˆ†æ”¯åå·²ç»æ¨é€åˆ°äº†è¿œç¨‹ä»“åº“æ”¹æ€ä¹ˆä¿®æ”¹å‘¢ï¼Ÿæ·¡å®šï¼Œåªéœ€è¦æŒ‰ç…§å¦‚ä¸‹æ­¥éª¤æ“ä½œå³å¯ï¼š

### åˆ†æ”¯å·²æ¨é€è¿œç¨‹

é¦–å…ˆçœ‹ä¸‹å½“å‰çš„ä»“åº“åˆ†æ”¯ä¿¡æ¯ï¼š

```git
git branch -av
```

å…¶ä¸­ -a æ˜¯è¡¨ç¤ºåˆ—å‡ºæœ¬åœ°å’Œè¿œç¨‹æ‰€æœ‰åˆ†æ”¯ï¼ˆallï¼‰çš„æ„æ€ï¼Œ-v å¯ä»¥ç†è§£ä¸ºåˆ—å‡ºæ›´å¤šè¯¦ç»†ä¿¡æ¯çš„æ„æ€ã€‚è¾“å‡ºç»“æœå¦‚ä¸‹ï¼ˆç¤ºä¾‹ç»“æœï¼‰ï¼š

```git
* master                01a6944 Initial commit
  remotes/origin/HEAD   -> origin/master
  remotes/origin/dev    01a6944 Initial commit
  remotes/origin/master 01a6944 Initial commit
```

å…¶ä¸­ * è¡¨ç¤ºæˆ‘å½“å‰æ‰€å¤„çš„åˆ†æ”¯å³ `remotes/origin/HEAD`ï¼Œæ³¨æ„çœ‹å½“å‰åˆ†æ”¯å…³è”çš„è¿œç¨‹åˆ†æ”¯æ˜¯ `origin/master`ï¼Œè¿™å°±æ˜¯æœ¬åœ°åˆ†æ”¯å’Œè¿œç¨‹åˆ†æ”¯å»ºç«‹çš„è”ç³»ï¼ˆ`--set-upstream-to`ï¼‰ã€‚

ä»åˆ—å‡ºçš„åˆ†æ”¯å¯ä»¥çœ‹åˆ°è¿œç¨‹æœ‰ä¸ª `dev` åˆ†æ”¯ï¼Œæˆ‘ç°åœ¨è¦å°†è¯¥åˆ†æ”¯åä¿®æ”¹ä¸º `develop` ï¼Œç°åœ¨çœ‹è¯¥æ€ä¹ˆåšã€‚

é¦–å…ˆåˆ‡æ¢åˆ° `dev` åˆ†æ”¯ï¼š

```git
$ git switch dev
# æˆ–
$ git checkout dev
```

ä¹‹åä½¿ç”¨ --delete é€‰é¡¹å°†è¿œç¨‹ dev åˆ†æ”¯åˆ é™¤ï¼š

```git
# åœ¨åˆ é™¤ä¹‹å‰æœ€å¥½å…ˆæ‹‰å–è¿œç¨‹åˆ†æ”¯æœ€æ–°ä»£ç 
$ git pull origin dev

# ä¹‹åå†åˆ é™¤è¿œç¨‹åˆ†æ”¯
$ git push --delete origin dev
```

:::info[æ³¨æ„]
é»˜è®¤çš„è¿œç¨‹ä»“åº“åæ˜¯ `origin`ï¼Œä½ å¯ä»¥ä½¿ç”¨ `git remote` å‘½ä»¤è¿›è¡ŒæŸ¥çœ‹ï¼Œå¦‚æœä½ çš„è¿œç¨‹ä»“åº“åä¸æ˜¯ `origin` å°†ä¸Šé¢å‘½ä»¤ä¸­çš„ origin æ”¹ä¸ºä½ çš„è¿œç¨‹ä»“åº“åå³å¯ã€‚
:::

ç°åœ¨å¦‚æœä½ ä½¿ç”¨ `git status` å‘½ä»¤å¯èƒ½ä¼šè¾“å‡ºå¦‚ä¸‹ç»“æœï¼Œè¯¥ç»“æœå‘Šè¯‰ä½ å…³è”çš„è¿œç¨‹åˆ†æ”¯ `origin/dev` å·²ç»è¢«åˆ é™¤ã€‚ä½ å¯ä»¥æ‰‹åŠ¨æ‰§è¡Œå‘½ä»¤
`git branch --unset-upstream` è¿›è¡Œå–æ¶ˆå…³è”ï¼Œä¸è¿‡æ²¡å•¥å¿…è¦ï¼Œå› ä¸ºä¹‹åæˆ‘ä»¬éœ€è¦ `--set-upstream-to` é‡æ–°å…³è”è¿œç¨‹åˆ†æ”¯ã€‚

```git
On branch dev
Your branch is based on 'origin/dev', but the upstream is gone.
  (use "git branch --unset-upstream" to fixup)

nothing to commit, working tree clean
```

ç°åœ¨ä½¿ç”¨ `git branch -m OldBranchName NewBranchName` å‘½ä»¤å°†æœ¬åœ°åˆ†æ”¯å `dev` ä¿®æ”¹ä¸º `develop` ï¼š

```git
git branch -m dev develop
```

ä¹‹åå†å°†ä¿®æ”¹åçš„åˆ†æ”¯ push åˆ°è¿œç¨‹ï¼š

```git
git push origin develop
```

ç„¶åä½¿ç”¨ `--set-upstream-to` å‚æ•°å°†æœ¬åœ°åˆ†æ”¯(`develop`)å’Œè¿œç¨‹ `origin/develop` åˆ†æ”¯å»ºç«‹å…³è”å…³ç³»ï¼š

```git
git branch --set-upstream-to=origin/develop
```

ç°åœ¨å†ä½¿ç”¨ `git status` å‘½ä»¤æŸ¥çœ‹è¾“å‡ºä¿¡æ¯ï¼Œä»è¾“å‡ºç»“æœä¸­å¯ä»¥çœ‹å‡ºå·²ç»å…³è”åˆ°è¿œç¨‹åˆ†æ”¯ `origin/develop`ï¼š

```git
On branch develop
Your branch is up to date with 'origin/develop'.

nothing to commit, working tree clean
```

è¿™æ ·ï¼Œä¸€æ¬¡å®Œæˆçš„è¿œç¨‹åˆ†æ”¯åç§°å°±ä¿®æ”¹å®Œæˆäº†ğŸ¥³ğŸ¥³ğŸ¥³ğŸ¥³~
