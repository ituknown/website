## å‰è¨€

ä¸åƒ `chown` å‘½ä»¤å¯ä»¥åŒæ—¶ä¿®æ”¹æ–‡ä»¶çš„æ‰€å±è€…ä»¥åŠæ‰€å±ç»„ï¼Œ`chgrp` ä»…ä»…åªèƒ½ä¿®æ”¹æ–‡ä»¶çš„æ‰€å±ç»„ã€‚æ‰€ä»¥åœ¨ä½¿ç”¨æ—¶æˆ‘ä»¬å¯ä»¥å°† `chown` å’Œ `chgrp` å‘½ä»¤è¿›è¡ŒåŒºåˆ†å¼€æ¥ä½¿ç”¨ï¼Œä»…ä½¿ç”¨ `chown` ä¿®æ”¹æ–‡ä»¶çš„æ‰€å±è€…ï¼Œä½¿ç”¨ `chgrp` ä¿®æ”¹æ–‡ä»¶çš„æ‰€å±ç»„ã€‚

`chgrp` è¯­æ³•å¦‚ä¸‹ï¼š

```bash
chgrp [-Rh] [GROUP] FILE...
```

å¯é€‰å‚æ•°è¯´æ˜ï¼š

```plaintext
-R,-recursive         é€’å½’ä¿®æ”¹æ‰€å±ç»„, ä¸»è¦ç”¨äºæ–‡ä»¶å¤¹
-h,--no-dereference   ä¿®æ”¹ç¬¦å·é“¾æ¥æœ¬èº«, è€Œä¸æ˜¯æ‰€é“¾æ¥çš„å…·ä½“æ–‡ä»¶
```

å¦å¤– `[GROUP]` æŒ‡å®šå…·ä½“ç»„ï¼Œå¯ä»¥æ˜¯ç»„çš„åç§°ä¹Ÿå¯ä»¥æ˜¯ GIDï¼Œä½†è¦ç‰¹åˆ«æ³¨æ„ï¼Œå¦‚æœæ˜¯ GID æ—¶éœ€è¦åœ¨ GID çš„å‰é¢åŠ ä¸ª `+` ä»¥åšåŒºåˆ†ï¼Œå¦åˆ™ä¼šå½“åšç»„çš„åç§°å¤„ç†ã€‚ç¤ºä¾‹ï¼š

```bash
chgrp +100 examplefile
```

## ä¿®æ”¹æ™®é€šæ–‡ä»¶æ‰€å±ç»„

è¿™ä¸ªç‰¹åˆ«ç®€å•ï¼Œä¸éœ€è¦åŠ ä»»ä½•å‚æ•°ã€‚ç¤ºä¾‹å‘½ä»¤å¦‚ä¸‹ï¼š

```bash
$ chgrp www-data filename
```

å¦å¤–ï¼Œä¹Ÿå¯ä»¥åŒæ—¶æŒ‡å®šä¿®æ”¹å¤šä¸ªæ–‡ä»¶ï¼š

```bash
$ chgrp www-data file1 file2 file3
```

ä½†æ˜¯æœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœä½ æŒ‡å®šçš„ç»„æ˜¯ä¸€ä¸ªå…·ä½“çš„ GIDï¼Œä¸€å®šè¦åœ¨ G1D å‰é¢åŠ ä¸Š `+`ï¼Œå¦åˆ™ä¼šå½“åšç»„çš„åæ¥å¤„ç†ã€‚æ¯”å¦‚ç»„ $GID_{www-data}=1000$ï¼Œä½¿ç”¨GID çš„å‘½ä»¤å°±ä¸ºï¼š

```bash
$ sudo chgrp +1000 filename
```

## ä¿®æ”¹ç¬¦å·é“¾æ¥æ–‡ä»¶æ‰€å±ç»„

å½“ä¸€ä¸ªæ–‡ä»¶æ˜¯ä¸€ä¸ªç¬¦å·é“¾æ¥æ—¶ï¼Œ`chgrp` å‘½ä»¤çš„é»˜è®¤è¡Œä¸ºæ˜¯ä¿®æ”¹ç¬¦å·é“¾æ¥æŒ‡å‘çš„ç›®æ ‡æ–‡ä»¶ï¼Œè€Œä¸æ˜¯ç¬¦å·é“¾æ¥æœ¬èº«ã€‚æ¯”å¦‚åœ¨æœ‰å¦‚ä¸‹ä¸¤ä¸ªæ–‡ä»¶ï¼Œå…¶ä¸­ rd æ˜¯æ–‡ä»¶ readme çš„ç¬¦å·é“¾æ¥ï¼š

```bash
$ ls -l
lrwxrwxrwx  1 root root    6 12æœˆ 19 20:09 rd -> readme
-rw-r--r--  1 root root    0 12æœˆ 19 20:09 readme
```

å½“æˆ‘ä»¬ä¿®æ”¹ rd çš„æ–‡ä»¶æ‰€å±ç»„æ—¶å…¶å®ä¿®æ”¹æ˜¯ç›®æ ‡æ–‡ä»¶ readme çš„æ‰€å±ç»„ï¼Œç¤ºä¾‹ï¼š

```bash
$ sudo chgrp www-data rd

$ ls -l
lrwxrwxrwx  1 root root        6 12æœˆ 19 20:09 rd -> readme
-rw-r--r--  1 root www-data    0 12æœˆ 19 20:09 readme
```

æ˜¾è€Œæ˜“è§ï¼ŒçœŸæ­£æ”¹ç¼–çš„æ˜¯æ–‡ä»¶ readme è€Œä¸æ˜¯ç¬¦å·é“¾æ¥ rdã€‚

:::tip
åœ¨æŸäº› Linux å‘è¡Œç‰ˆä¸Šï¼Œå½“ä½  `chgrp` ä¿®æ”¹ç¬¦å·é“¾æ¥çš„æ‰€å±ç»„æ—¶å¯èƒ½ä¼šå¾—åˆ°ä¸€ä¸ªé”™è¯¯ï¼š `â€œcannot dereference â€˜symlink1â€™: Permission deniedâ€ error`ã€‚

å‘ç”Ÿè¯¥é”™è¯¯æ˜¯å› ä¸ºé»˜è®¤æƒ…å†µä¸‹åœ¨å¤§å¤šæ•° Linux å‘è¡Œç‰ˆä¸Šï¼Œç¬¦å·é“¾æ¥å—åˆ°ä¿æŠ¤ï¼Œå¹¶ä¸”ä½ æ— æ³•å¯¹ç›®æ ‡æ–‡ä»¶è¿›è¡Œæ“ä½œã€‚

è¯¥è¡Œä¸ºå®šä¹‰åœ¨æ–‡ä»¶ `/proc/sys/fs/protected_symlinks` ä¸­ï¼Œ`1` è¡¨ç¤ºå¼€å¯ä¿æŠ¤ï¼Œ `0` è¡¨ç¤ºå…³é—­ä¿æŠ¤ã€‚å½“ç„¶äº†ï¼Œå¹¶ä¸æ¨èå…³é—­è¯¥ä¿æŠ¤è¡Œä¸ºã€‚
:::

å¯¹äºç¬¦å·é“¾æ¥ `chgrp` å‘½ä»¤çš„é»˜è®¤è¡Œä¸ºæ˜¯ä¿®æ”¹ç›®æ ‡æ–‡ä»¶è¿™ä¸ªé—®é¢˜è¯¥æ€ä¹ˆè§£å†³å‘¢ï¼Ÿå¦‚æˆ‘å®é™…ä¸Šå°±æ˜¯æƒ³ä¿®æ”¹ç¬¦å·é“¾æ¥çš„æ‰€å±ç»„å’‹æ•´ï¼Ÿ

ä½¿ç”¨ `-h` å‚æ•°å³å¯ï¼

ç¤ºä¾‹ï¼š

```bash
$ sudo chgrp -h www-data rd

$ ls -l
lrwxrwxrwx  1 root www-data    6 12æœˆ 19 20:09 rd -> readme
-rw-r--r--  1 root www-data    0 12æœˆ 19 20:09 readme
```

ç°åœ¨ä¿®æ”¹çš„å°±æ˜¯ç¬¦å·é“¾æ¥æœ¬èº«äº†~


## é€’å½’ä¿®æ”¹æ–‡ä»¶æ‰€å±ç»„

å¦‚æœä¿®æ”¹çš„æ–‡ä»¶æ˜¯ä¸€ä¸ªç›®å½•ï¼Œåœ¨ä¿®æ”¹ç›®å½•çš„æ‰€å±ç»„æ—¶æƒ³å°†è¯¥ç›®å½•å†…çš„æ–‡ä»¶çš„æ‰€å±ç»„ä¹Ÿä¸€å¹¶ä¿®æ”¹å°±å¯ä»¥ä½¿ç”¨é€’å½’å‚æ•° `-R` æ¥å®ç°ã€‚æ¯”å¦‚æœ‰ä¸€ä¸ªç›®å½• `/var/www`ï¼Œæƒ³å°†è¯¥ç›®å½•ä»¥åŠç›®å½•å†…çš„æ‰€æœ‰æ–‡ä»¶çš„æ‰€å±ç»„éƒ½ä¿®æ”¹ä¸º `www-data`ï¼Œå°±å¯ä»¥ç›´æ¥ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤æ¥å®ç°ï¼š

```bash
$ sudo chgrp -R www-data /var/www
```

å¦å¤–ï¼Œå¦‚æœä½ ä¿®æ”¹çš„æ˜¯ä¸€ä¸ªç¬¦å·é“¾æ¥ï¼Œè¯¥ç¬¦å·é“¾æ¥æŒ‡å‘çš„æ˜¯ä¸€ä¸ªç›®å½•æ—¶ï¼Œè¿˜éœ€è¦åŠ ä¸Š `-h` å‚æ•°ã€‚ç¤ºä¾‹ï¼š

```bash
$ ls
lrwxrwxrwx  1 root root    6 12æœˆ 19 20:09 dr -> /var/www
```

é€’å½’ä¿®æ”¹ç¬¦å·é“¾æ¥æ‰€å±ç»„æƒé™ï¼š

```bash
$ sudo chgrp -Rh www-data dr
```

--

å®Œç»“ï¼Œæ’’èŠ±ğŸ‰ğŸ‰ğŸ‰~